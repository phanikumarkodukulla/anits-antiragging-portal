<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ANITS | Submit Complaint</title>

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
    />
    <link rel="stylesheet" href="/css/style.css" />

    <style>
      .form-section {
        position: relative;
      }
      .section-icon {
        width: 48px;
        height: 48px;
        background: linear-gradient(135deg, var(--primary-blue), #1e4a7a);
        border-radius: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-size: 1.25rem;
        flex-shrink: 0;
      }
      .input-group-text {
        background-color: #f8f9fa;
        border-right: none;
        color: var(--primary-blue);
      }
      .form-control:focus {
        border-color: var(--primary-blue);
        box-shadow: 0 0 0 0.2rem rgba(42, 89, 155, 0.15);
      }
      .form-control,
      .form-select {
        border-left: none;
      }
      .form-control:focus + .input-group-text,
      .input-group-text + .form-control:focus {
        border-color: var(--primary-blue);
      }
      .upload-zone {
        border: 2px dashed #dee2e6;
        border-radius: 8px;
        padding: 1rem;
        transition: all 0.3s;
        background: #f8f9fa;
      }
      .upload-zone:hover {
        border-color: var(--primary-blue);
        background: rgba(42, 89, 155, 0.05);
      }
      .upload-zone input[type="file"] {
        opacity: 0;
        position: absolute;
        width: 100%;
        height: 100%;
        cursor: pointer;
      }
      .upload-zone {
        position: relative;
      }
    </style>
  </head>
  <body class="student-page">
    <%- include('../partials/navbar', { currentPage: 'submit' }) %>

    <!-- Page Header -->
    <header class="page-header" style="padding: 3rem 0">
      <div class="container">
        <div class="row align-items-center justify-content-center">
          <div class="col-lg-8 text-center">
            <h1 class="fw-bold mb-2">
              <i class="fas fa-file-alt me-3"></i>Submit Ragging Complaint
            </h1>
            <p class="lead mb-0">
              Your complaint will be handled with complete confidentiality
            </p>
          </div>
        </div>
      </div>
    </header>

    <!-- Main Content -->
    <main class="container section-padding">
      <div class="row justify-content-center">
        <div class="col-lg-10">
          <% if (error) { %>
          <div
            class="alert alert-danger alert-dismissible fade show mb-4"
            role="alert"
          >
            <i class="fas fa-exclamation-circle me-2"></i
            ><strong>Error:</strong> <%= error %>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="alert"
            ></button>
          </div>
          <% } %>

          <!-- Important Notice -->
          <div class="card mb-4" style="border-left: 4px solid #17a2b8">
            <div class="card-body">
              <h6 class="fw-bold text-info mb-2">
                <i class="fas fa-shield-alt me-2"></i>Confidentiality Guaranteed
              </h6>
              <p class="mb-0 text-muted">
                Your complaint will be kept strictly confidential. You can
                choose to remain anonymous, and your identity will be protected
                throughout the investigation process.
              </p>
            </div>
          </div>

          <!-- Main Form Card -->
          <div class="card shadow-sm">
            <div class="card-body p-4 p-md-5">
              <form
                action="/complaint/submit"
                method="POST"
                enctype="multipart/form-data"
                id="complaintForm"
              >
                <!-- Section 1: Personal Information -->
                <div class="form-section mb-5">
                  <div class="d-flex align-items-center mb-4">
                    <div class="section-icon me-3">
                      <i class="fas fa-user"></i>
                    </div>
                    <div>
                      <h5 class="fw-bold mb-1">Your Information</h5>
                      <p class="text-muted small mb-0">
                        Your contact details (required for case updates)
                      </p>
                    </div>
                  </div>

                  <div class="row g-3">
                    <div class="col-12">
                      <label class="form-label">
                        Full Name
                        <span class="text-muted small"
                          >(Optional - for anonymous complaints)</span
                        >
                      </label>
                      <div class="input-group">
                        <span class="input-group-text"
                          ><i class="fas fa-user"></i
                        ></span>
                        <input
                          type="text"
                          class="form-control"
                          name="studentName"
                          placeholder="Enter your name or leave blank for anonymous"
                        />
                      </div>
                      <small class="form-text text-muted">
                        <i class="fas fa-info-circle me-1"></i>Leave blank if
                        you want to remain completely anonymous
                      </small>
                    </div>

                    <div class="col-md-6">
                      <label class="form-label">
                        Email Address <span class="text-danger">*</span>
                      </label>
                      <div class="input-group">
                        <span class="input-group-text"
                          ><i class="fas fa-envelope"></i
                        ></span>
                        <input
                          type="email"
                          class="form-control"
                          name="email"
                          required
                          placeholder="your.email@example.com"
                        />
                      </div>
                    </div>

                    <div class="col-md-6">
                      <label class="form-label">
                        Phone Number <span class="text-danger">*</span>
                      </label>
                      <div class="input-group">
                        <span class="input-group-text"
                          ><i class="fas fa-phone"></i
                        ></span>
                        <input
                          type="tel"
                          class="form-control"
                          name="phone"
                          required
                          placeholder="+91 98765 43210"
                        />
                      </div>
                    </div>
                  </div>
                </div>

                <!-- Section 2: Complaint Details -->
                <div class="form-section mb-5">
                  <div class="d-flex align-items-center mb-4">
                    <div class="section-icon me-3">
                      <i class="fas fa-clipboard-list"></i>
                    </div>
                    <div>
                      <h5 class="fw-bold mb-1">Complaint Details</h5>
                      <p class="text-muted small mb-0">
                        Describe the incident in detail
                      </p>
                    </div>
                  </div>

                  <div class="row g-3">
                    <div class="col-12">
                      <label class="form-label">
                        Complaint Title <span class="text-danger">*</span>
                      </label>
                      <div class="input-group">
                        <span class="input-group-text"
                          ><i class="fas fa-heading"></i
                        ></span>
                        <input
                          type="text"
                          class="form-control"
                          name="title"
                          required
                          placeholder="Brief summary of the incident"
                        />
                      </div>
                    </div>

                    <div class="col-12">
                      <label class="form-label">
                        Detailed Description <span class="text-danger">*</span>
                      </label>
                      <textarea
                        class="form-control"
                        name="description"
                        rows="8"
                        required
                        placeholder="Please provide a detailed description of what happened, including:&#10;• Date and time of the incident&#10;• Names or descriptions of individuals involved&#10;• Any witnesses present&#10;• Exact location where it occurred&#10;• What was said or done&#10;• Any other relevant details"
                      ></textarea>
                      <small class="form-text text-muted">
                        <i class="fas fa-lightbulb me-1"></i>Be as detailed as
                        possible. More information helps us investigate
                        effectively.
                      </small>
                    </div>

                    <div class="col-md-6">
                      <label class="form-label">
                        Location <span class="text-danger">*</span>
                      </label>
                      <div class="input-group">
                        <span class="input-group-text"
                          ><i class="fas fa-map-marker-alt"></i
                        ></span>
                        <input
                          type="text"
                          class="form-control"
                          name="location"
                          required
                          placeholder="e.g., Hostel Block A, Room 101"
                        />
                      </div>
                    </div>

                    <div class="col-md-6">
                      <label class="form-label">
                        Severity Level <span class="text-danger">*</span>
                      </label>
                      <div class="input-group">
                        <span class="input-group-text"
                          ><i class="fas fa-exclamation-triangle"></i
                        ></span>
                        <select class="form-select" name="severity" required>
                          <option value="Low">
                            Low - Verbal/Minor teasing
                          </option>
                          <option value="Medium" selected>
                            Medium - Harassment/Intimidation
                          </option>
                          <option value="High">
                            High - Physical violence/Severe abuse
                          </option>
                        </select>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- Section 3: Evidence Upload -->
                <div class="form-section mb-5">
                  <div class="d-flex align-items-center mb-4">
                    <div class="section-icon me-3">
                      <i class="fas fa-paperclip"></i>
                    </div>
                    <div>
                      <h5 class="fw-bold mb-1">Supporting Evidence</h5>
                      <p class="text-muted small mb-0">
                        Upload photos, videos, or documents (optional but
                        helpful)
                      </p>
                    </div>
                  </div>

                  <div class="upload-zone">
                    <input
                      type="file"
                      class="form-control"
                      name="evidenceFiles"
                      id="evidenceFiles"
                      multiple
                      accept="image/*,video/*,audio/*,.pdf"
                    />
                    <div class="upload-hint text-center py-4">
                      <i
                        class="fas fa-cloud-upload-alt fa-3x mb-3"
                        style="color: var(--primary-blue); opacity: 0.5"
                      ></i>
                      <p class="mb-1">
                        <strong>Click to upload</strong> or drag and drop
                      </p>
                      <small class="text-muted"
                        >Images, Videos, Audio, or PDF • Max 50MB per file • Up
                        to 10 files</small
                      >
                    </div>
                  </div>
                </div>

                <!-- Section 4: Privacy Settings -->
                <div class="form-section mb-4">
                  <div class="d-flex align-items-center mb-4">
                    <div class="section-icon me-3">
                      <i class="fas fa-user-secret"></i>
                    </div>
                    <div>
                      <h5 class="fw-bold mb-1">Privacy & Confirmation</h5>
                      <p class="text-muted small mb-0">
                        Choose your privacy settings
                      </p>
                    </div>
                  </div>

                  <div class="card border-0" style="background-color: #f8f9fa">
                    <div class="card-body">
                      <div class="form-check mb-3">
                        <input
                          class="form-check-input"
                          type="checkbox"
                          name="isAnonymous"
                          id="anonymous"
                        />
                        <label class="form-check-label" for="anonymous">
                          <strong
                            ><i class="fas fa-eye-slash me-2"></i>Submit as
                            Anonymous</strong
                          >
                          <p class="small text-muted mb-0 mt-1">
                            Your name will not be visible to administrators.
                            Only your email and phone will be recorded for
                            updates.
                          </p>
                        </label>
                      </div>

                      <div class="form-check">
                        <input
                          class="form-check-input"
                          type="checkbox"
                          name="confirmTruthful"
                          id="confirm"
                          required
                        />
                        <label class="form-check-label" for="confirm">
                          <strong
                            ><i class="fas fa-check-circle me-2"></i>I confirm
                            this complaint is truthful
                            <span class="text-danger">*</span></strong
                          >
                          <p class="small text-muted mb-0 mt-1">
                            I understand that false or malicious complaints may
                            lead to disciplinary action.
                          </p>
                        </label>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- Submit Buttons -->
                <div class="d-grid gap-2 d-md-flex justify-content-md-between">
                  <a href="/" class="btn btn-outline-secondary btn-lg px-5">
                    <i class="fas fa-times me-2"></i>Cancel
                  </a>
                  <button type="submit" class="btn btn-primary btn-lg px-5">
                    <i class="fas fa-paper-plane me-2"></i>Submit Complaint
                  </button>
                </div>
              </form>
            </div>
          </div>

          <!-- Emergency Help Card -->
          <div class="card mt-4" style="border-left: 4px solid #dc3545">
            <div class="card-body">
              <h6 class="text-danger fw-bold mb-3">
                <i class="fas fa-exclamation-triangle me-2"></i>Need Immediate
                Help?
              </h6>
              <p class="mb-3">
                If you are in immediate danger or need urgent assistance:
              </p>
              <div class="row g-3">
                <div class="col-md-4">
                  <div class="d-flex align-items-center">
                    <i
                      class="fas fa-exclamation-triangle fa-2x text-danger me-3"
                    ></i>
                    <div>
                      <small class="text-muted d-block">Emergency SOS</small>
                      <strong>Press Red SOS Button</strong>
                    </div>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="d-flex align-items-center">
                    <i class="fas fa-phone fa-2x text-danger me-3"></i>
                    <div>
                      <small class="text-muted d-block">UGC Helpline</small>
                      <strong>1800-180-5522</strong>
                    </div>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="d-flex align-items-center">
                    <i class="fas fa-shield-alt fa-2x text-danger me-3"></i>
                    <div>
                      <small class="text-muted d-block">Campus Security</small>
                      <strong>+91-XXXX-XXXXXX</strong>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>

    <%- include('../partials/footer') %>

    <!-- SOS Button -->
    <button id="sosButton" class="sos-button" title="Emergency SOS Alert">
      <i class="fas fa-exclamation-triangle"></i>
    </button>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="/js/main.js"></script>
    <script src="/js/sos.js"></script>
  </body>
</html>
